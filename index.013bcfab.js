var t={};const e=new class{constructor(t){this.board=t,this.score=0,this.button=document.querySelector(".button"),this.isStarted=!1,this.handleClick=this.startOrRestart.bind(this),this.button.addEventListener("click",this.handleClick),this.tableCells=document.querySelectorAll(".field-cell")}moveLeft(){let t=!1;for(let e=0;e<this.board.length;e++){let s=this.board[e],r=s.filter(t=>0!==t);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]=2*r[e],r[e+1]=0,this.score+=r[e],t=!0);for(r=r.filter(t=>0!==t);r.length<4;)r.push(0);this.board[e]=r,JSON.stringify(s)!==JSON.stringify(r)&&(t=!0)}t&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}moveRight(){let t=!1;for(let e=0;e<this.board.length;e++){let s=this.board[e],r=s.filter(t=>0!==t);for(let e=r.length-1;e>0;e--)r[e]===r[e-1]&&(r[e]=2*r[e],r[e-1]=0,this.score+=r[e],t=!0);for(r=r.filter(t=>0!==t);r.length<4;)r.unshift(0);this.board[e]=r,JSON.stringify(s)!==JSON.stringify(r)&&(t=!0)}t&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}moveUp(){let t=!1;this.board=this.transpose(this.board);for(let e=0;e<this.board.length;e++){let s=this.board[e],r=s.filter(t=>0!==t);for(let e=0;e<r.length-1;e++)r[e]===r[e+1]&&(r[e]=2*r[e],r[e+1]=0,this.score+=r[e],t=!0);for(r=r.filter(t=>0!==t);r.length<4;)r.push(0);this.board[e]=r,JSON.stringify(s)!==JSON.stringify(r)&&(t=!0)}this.board=this.transpose(this.board),t&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}moveDown(){let t=!1;this.board=this.transpose(this.board);for(let e=0;e<this.board.length;e++){let s=this.board[e],r=s.filter(t=>0!==t);for(let e=r.length-1;e>0;e--)r[e]===r[e-1]&&(r[e]=2*r[e],r[e-1]=0,this.score+=r[e],t=!0);for(r=r.filter(t=>0!==t);r.length<4;)r.unshift(0);this.board[e]=r,JSON.stringify(s)!==JSON.stringify(r)&&(t=!0)}this.board=this.transpose(this.board),t&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}transpose(t){return t[0].map((e,s)=>t.map(t=>t[s]))}getScore(){return document.querySelector(".game-score").textContent=this.score,this.score}getState(){return this.board}getStatus(){return this.isStarted?this.checkWin()?"win":this.checkLose()?"lose":"playing":"idle"}startOrRestart(){this.isStarted?this.restart():this.start()}start(){document.querySelector(".message.message-start").textContent="The game has started! Use the arrow keys to play.",this.button.classList.remove("start"),this.button.classList.add("restart"),this.button.textContent="Restart",this.isStarted=!0,this.placeRandomNumber(this.board),this.placeRandomNumber(this.board),this.renderBoard()}restart(){let t=document.querySelector(".message.message-start"),e=document.querySelector(".message-lose"),s=document.querySelector(".game-score");e.classList.contains("hidden")||e.classList.add("hidden"),t.textContent='Press "Start" to begin game. Good luck!',t.classList.remove("hidden"),this.button.classList.remove("restart"),this.button.classList.add("start"),this.button.textContent="Start",this.isStarted=!1,this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,s.textContent=0,this.renderBoard()}getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t}placeRandomNumber(t){let e=[];for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)0===t[s][r]&&e.push([s,r]);if(e.length>0){let s=this.getRandomInt(0,e.length),[r,o]=e[s];t[r][o]=Math.random()>.1?2:4}}renderBoard(){this.tableCells.forEach((t,e)=>{let s=Math.floor(e/4),r=e%4;0!==this.board[s][r]?(t.textContent=this.board[s][r],t.className=`field-cell field-cell--${this.board[s][r]}`):(t.textContent="",t.className="field-cell")})}renderScore(){document.querySelector(".game-score").textContent=this.score}has2048Tile(){for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)if(this.board[t][e]>=2048)return this.showWinMessage()}showWinMessage(){let t=document.querySelector(".message.message-start"),e=document.querySelector(".message.message-win"),s=document.querySelector(".message.message-lose");t.classList.add("hidden"),s.classList.add("hidden"),e.classList.remove("hidden")}showLoseMessage(){let t=document.querySelector(".message.message-start"),e=document.querySelector(".message.message-win"),s=document.querySelector(".message.message-lose");t.classList.add("hidden"),e.classList.add("hidden"),s.classList.remove("hidden")}checkLose(){for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)if(0===this.board[t][e])return!1;for(let t=0;t<this.board.length;t++)for(let e=0;e<this.board[t].length;e++)if(e<this.board[t].length-1&&this.board[t][e]===this.board[t][e+1]||t<this.board.length-1&&this.board[t][e]===this.board[t+1][e])return!1;return!0}}([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);document.addEventListener("keydown",t=>{switch(t.key){case"ArrowLeft":e.moveLeft();break;case"ArrowRight":e.moveRight();break;case"ArrowUp":e.moveUp();break;case"ArrowDown":e.moveDown()}});
//# sourceMappingURL=index.013bcfab.js.map
