!function(){var t={};function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=Array(e);r<e;r++)s[r]=t[r];return s}var r=new(function(){var t;function r(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),this.board=t,this.score=0,this.button=document.querySelector(".button"),this.isStarted=!1,this.handleClick=this.startOrRestart.bind(this),this.button.addEventListener("click",this.handleClick),this.tableCells=document.querySelectorAll(".field-cell")}return t=[{key:"moveLeft",value:function(){for(var t=this,e=!1,r=0;r<this.board.length;r++)!function(r){for(var s=t.board[r],n=s.filter(function(t){return 0!==t}),o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]=2*n[o],n[o+1]=0,t.score+=n[o],e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.push(0);t.board[r]=n,JSON.stringify(s)!==JSON.stringify(n)&&(e=!0)}(r);e&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}},{key:"moveRight",value:function(){for(var t=this,e=!1,r=0;r<this.board.length;r++)!function(r){for(var s=t.board[r],n=s.filter(function(t){return 0!==t}),o=n.length-1;o>0;o--)n[o]===n[o-1]&&(n[o]=2*n[o],n[o-1]=0,t.score+=n[o],e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.unshift(0);t.board[r]=n,JSON.stringify(s)!==JSON.stringify(n)&&(e=!0)}(r);e&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}},{key:"moveUp",value:function(){var t=this,e=!1;this.board=this.transpose(this.board);for(var r=0;r<this.board.length;r++)!function(r){for(var s=t.board[r],n=s.filter(function(t){return 0!==t}),o=0;o<n.length-1;o++)n[o]===n[o+1]&&(n[o]=2*n[o],n[o+1]=0,t.score+=n[o],e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.push(0);t.board[r]=n,JSON.stringify(s)!==JSON.stringify(n)&&(e=!0)}(r);this.board=this.transpose(this.board),e&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}},{key:"moveDown",value:function(){var t=this,e=!1;this.board=this.transpose(this.board);for(var r=0;r<this.board.length;r++)!function(r){for(var s=t.board[r],n=s.filter(function(t){return 0!==t}),o=n.length-1;o>0;o--)n[o]===n[o-1]&&(n[o]=2*n[o],n[o-1]=0,t.score+=n[o],e=!0);for(n=n.filter(function(t){return 0!==t});n.length<4;)n.unshift(0);t.board[r]=n,JSON.stringify(s)!==JSON.stringify(n)&&(e=!0)}(r);this.board=this.transpose(this.board),e&&(this.placeRandomNumber(this.board),this.renderBoard(),this.renderScore()),this.has2048Tile(),this.checkLose()&&this.showLoseMessage()}},{key:"transpose",value:function(t){return t[0].map(function(e,r){return t.map(function(t){return t[r]})})}},{key:"getScore",value:function(){return document.querySelector(".game-score").textContent=this.score,this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.isStarted?this.checkWin()?"win":this.checkLose()?"lose":"playing":"idle"}},{key:"startOrRestart",value:function(){this.isStarted?this.restart():this.start()}},{key:"start",value:function(){document.querySelector(".message.message-start").textContent="The game has started! Use the arrow keys to play.",this.button.classList.remove("start"),this.button.classList.add("restart"),this.button.textContent="Restart",this.isStarted=!0,this.placeRandomNumber(this.board),this.placeRandomNumber(this.board),this.renderBoard()}},{key:"restart",value:function(){var t=document.querySelector(".message.message-start"),e=document.querySelector(".message-lose"),r=document.querySelector(".game-score");e.classList.contains("hidden")||e.classList.add("hidden"),t.textContent='Press "Start" to begin game. Good luck!',t.classList.remove("hidden"),this.button.classList.remove("restart"),this.button.classList.add("start"),this.button.textContent="Start",this.isStarted=!1,this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,r.textContent=0,this.renderBoard()}},{key:"getRandomInt",value:function(t,e){return Math.floor(Math.random()*(e-t))+t}},{key:"placeRandomNumber",value:function(t){for(var r=[],s=0;s<t.length;s++)for(var n=0;n<t[s].length;n++)0===t[s][n]&&r.push([s,n]);if(r.length>0){var o,a=this.getRandomInt(0,r.length),i=function(t){if(Array.isArray(t))return t}(o=r[a])||function(t,e){var r,s,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o=[],a=!0,i=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),2!==o.length);a=!0);}catch(t){i=!0,s=t}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}return o}}(o,2)||function(t,r){if(t){if("string"==typeof t)return e(t,2);var s=Object.prototype.toString.call(t).slice(8,-1);if("Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s)return Array.from(s);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return e(t,2)}}(o,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=i[0],c=i[1];t[h][c]=Math.random()>.1?2:4}}},{key:"renderBoard",value:function(){var t=this;this.tableCells.forEach(function(e,r){var s=Math.floor(r/4),n=r%4;0!==t.board[s][n]?(e.textContent=t.board[s][n],e.className="field-cell field-cell--".concat(t.board[s][n])):(e.textContent="",e.className="field-cell")})}},{key:"renderScore",value:function(){document.querySelector(".game-score").textContent=this.score}},{key:"has2048Tile",value:function(){for(var t=0;t<this.board.length;t++)for(var e=0;e<this.board[t].length;e++)if(this.board[t][e]>=2048)return this.showWinMessage()}},{key:"showWinMessage",value:function(){var t=document.querySelector(".message.message-start"),e=document.querySelector(".message.message-win"),r=document.querySelector(".message.message-lose");t.classList.add("hidden"),r.classList.add("hidden"),e.classList.remove("hidden")}},{key:"showLoseMessage",value:function(){var t=document.querySelector(".message.message-start"),e=document.querySelector(".message.message-win"),r=document.querySelector(".message.message-lose");t.classList.add("hidden"),e.classList.add("hidden"),r.classList.remove("hidden")}},{key:"checkLose",value:function(){for(var t=0;t<this.board.length;t++)for(var e=0;e<this.board[t].length;e++)if(0===this.board[t][e])return!1;for(var r=0;r<this.board.length;r++)for(var s=0;s<this.board[r].length;s++)if(s<this.board[r].length-1&&this.board[r][s]===this.board[r][s+1]||r<this.board.length-1&&this.board[r][s]===this.board[r+1][s])return!1;return!0}}],function(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}(r.prototype,t),r}())([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);document.addEventListener("keydown",function(t){switch(t.key){case"ArrowLeft":r.moveLeft();break;case"ArrowRight":r.moveRight();break;case"ArrowUp":r.moveUp();break;case"ArrowDown":r.moveDown()}})}();
//# sourceMappingURL=index.77a561ea.js.map
